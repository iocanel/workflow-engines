<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Workflow Engines</title>
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <style>
    body { 
      font-family: sans-serif; 
      margin: 20px; 
      display: flex;
      gap: 20px;
    }
    .sidebar {
      width: 250px;
      background: #f5f5f5;
      padding: 15px;
      border-radius: 5px;
    }
    .sidebar h2 {
      margin: 0 0 15px 0;
      font-size: 16px;
      color: #333;
      font-weight: bold;
    }
    .content {
      flex: 1;
    }
    .facet-group {
      margin-bottom: 20px;
      margin-left: 10px;
    }
    .facet-group h3 {
      margin: 0 0 10px 0;
      font-size: 14px;
      color: #333;
      cursor: pointer;
      user-select: none;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .facet-group h3:hover {
      background-color: #e8e8e8;
      border-radius: 3px;
      padding: 2px 4px;
      margin: -2px -4px 8px -4px;
    }
    .collapse-icon {
      font-size: 12px;
      transition: transform 0.2s ease;
    }
    .collapse-icon.collapsed {
      transform: rotate(-90deg);
    }
    .facet-items {
      transition: max-height 0.3s ease;
      overflow: hidden;
    }
    .facet-items.collapsed {
      max-height: 0;
    }
    .facet-item {
      margin: 5px 0;
    }
    .facet-item label {
      font-size: 12px;
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    .facet-item input {
      margin-right: 8px;
    }
    .results {
      display: grid;
      gap: 15px;
    }
    .result-item {
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 5px;
      background: white;
    }
    .result-item h4 {
      margin: 0 0 10px 0;
      color: #2c5aa0;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .result-item h4 a {
      color: #2c5aa0;
      text-decoration: none;
    }
    .result-item h4 a:hover {
      text-decoration: underline;
    }
    .engine-icon {
      width: 24px;
      height: 24px;
      border-radius: 4px;
      object-fit: contain;
    }
    .result-item .field {
      margin: 5px 0;
      font-size: 14px;
    }
    .result-item .field strong {
      color: #555;
    }
    .count {
      color: #666;
      font-size: 11px;
    }
    .tooltip {
      position: relative;
      cursor: help;
    }
    .tooltip .tooltiptext {
      visibility: hidden;
      width: 250px;
      background-color: #333;
      color: #fff;
      text-align: left;
      border-radius: 6px;
      padding: 8px;
      position: absolute;
      z-index: 1000;
      bottom: 125%;
      left: 50%;
      margin-left: -125px;
      opacity: 0;
      transition: opacity 0.3s;
      font-size: 12px;
      line-height: 1.4;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    .tooltip .tooltiptext::after {
      content: "";
      position: absolute;
      top: 100%;
      left: 50%;
      margin-left: -5px;
      border-width: 5px;
      border-style: solid;
      border-color: #333 transparent transparent transparent;
    }
    .tooltip:hover .tooltiptext {
      visibility: visible;
      opacity: 1;
    }
  </style>
</head>
<body>

<div class="sidebar">
  <h2>Categorizations</h2>
  <div id="facets"></div>
</div>
<div class="content">
  <h1>Workflow Engine Explorer</h1>
  <div id="results" class="results"></div>
</div>

<script>
  const workflowData = [
    {
      "name": "Temporal",
      "url": "https://temporal.io",
      "icon": "icons/temporal.png",
      "ontological": "Event-centric",
      "architectural": "Log-based",
      "teleological": "Microservice orchestration",
      "structural": "Code-as-workflow",
      "other": ["Persistent orchestration", "Replayable / deterministic"]
    },
    {
      "name": "Airflow",
      "url": "https://airflow.apache.org",
      "icon": "icons/airflow.png",
      "ontological": "Data-centric",
      "architectural": "DAG-based",
      "teleological": "Data Pipelines",
      "structural": "Graph-based (DAG)",
      "other": ["Ephemeral execution"]
    },
    {
      "name": "Camunda (Zeebe)",
      "url": "https://camunda.com",
      "icon": "icons/camunda.png",
      "ontological": "Process-centric",
      "architectural": "State-machine based",
      "teleological": "Business process automation",
      "structural": "Model-driven / DSLs",
      "other": ["Persistent orchestration", "Microservice orchestration"]
    },
    {
      "name": "Apache Camel",
      "url": "https://camel.apache.org",
      "icon": "icons/camel.png",
      "ontological": "Integration-centric",
      "architectural": "Code flows",
      "teleological": "Integration",
      "structural": "Model-driven / DSLs",
      "other": ["Ephemeral execution", "Mutable / imperative"]
    },
    {
      "name": "Dagster",
      "url": "https://dagster.io",
      "icon": "icons/dagster.png",
      "ontological": "Data-centric",
      "architectural": "DAG-based",
      "teleological": "Data Pipelines",
      "structural": "Code-as-workflow",
      "other": ["Persistent orchestration", "Type-aware"]
    },
    {
      "name": "Prefect",
      "url": "https://prefect.io",
      "icon": "icons/prefect.png",
      "ontological": "Data-centric",
      "architectural": "Code flows",
      "teleological": "Data Pipelines",
      "structural": "Code-as-workflow",
      "other": ["Ephemeral execution", "Dynamic orchestration"]
    },
    {
      "name": "Luigi",
      "url": "https://github.com/spotify/luigi",
      "icon": "icons/luigi.png",
      "ontological": "Data-centric",
      "architectural": "DAG-based",
      "teleological": "Data Pipelines",
      "structural": "Graph-based (DAG)",
      "other": ["Ephemeral execution"]
    },
    {
      "name": "Argo Workflows",
      "url": "https://argoproj.github.io/workflows",
      "icon": "icons/argo.png",
      "ontological": "Process-centric",
      "architectural": "DAG-based",
      "teleological": "CI/CD",
      "structural": "YAML specifications",
      "other": ["Ephemeral execution", "Kubernetes-native", "Container-centric"]
    },
    {
      "name": "Tekton",
      "url": "https://tekton.dev",
      "icon": "icons/tekton.png",
      "ontological": "Process-centric",
      "architectural": "Code flows",
      "teleological": "CI/CD",
      "structural": "YAML specifications",
      "other": ["Ephemeral execution", "Kubernetes-native", "Pipeline-as-code", "Container-centric"]
    },
    {
      "name": "Kestra",
      "url": "https://kestra.io",
      "icon": "icons/kestra.png",
      "ontological": "Data-centric",
      "architectural": "DAG-based",
      "teleological": "Data Pipelines",
      "structural": "YAML specifications",
      "other": ["Persistent orchestration", "Event-driven"]
    },
    {
      "name": "Flowable",
      "url": "https://flowable.com",
      "icon": "icons/flowable.png",
      "ontological": "Process-centric",
      "architectural": "DAG-based",
      "teleological": "Business process automation",
      "structural": "Model-driven / DSLs",
      "other": ["Persistent orchestration", "State-machine based"]
    },
    {
      "name": "Activiti",
      "url": "https://www.activiti.org",
      "icon": "icons/activiti.png",
      "ontological": "Process-centric",
      "architectural": "DAG-based",
      "teleological": "Business process automation",
      "structural": "Model-driven / DSLs",
      "other": ["Persistent orchestration", "State-machine based"]
    },
    {
      "name": "jBPM",
      "url": "https://www.jbpm.org",
      "icon": "icons/jbpm.png",
      "ontological": "Process-centric",
      "architectural": "DAG-based",
      "teleological": "Business process automation",
      "structural": "Model-driven / DSLs",
      "other": ["Persistent orchestration", "State-machine based"]
    },
    {
      "name": "Boomi",
      "url": "https://boomi.com",
      "icon": "icons/boomi.png",
      "ontological": "Integration-centric",
      "architectural": "Code flows",
      "teleological": "Integration",
      "structural": "Model-driven / DSLs",
      "other": ["Cloud-native", "Managed service", "Visual workflow design"]
    },
    {
      "name": "n8n",
      "url": "https://n8n.io",
      "icon": "icons/n8n.png",
      "ontological": "Automation-centric",
      "architectural": "Code flows",
      "teleological": "Business process automation",
      "structural": "Node-based flows",
      "other": ["Event-driven", "Self-hosted", "Visual workflow design"]
    },
    {
      "name": "Make",
      "url": "https://make.com",
      "icon": "icons/make.png",
      "ontological": "Automation-centric",
      "architectural": "Code flows",
      "teleological": "Business process automation",
      "structural": "Node-based flows",
      "other": ["Event-driven", "Cloud-native", "Visual workflow design"]
    },
    {
      "name": "Zapier",
      "url": "https://zapier.com",
      "icon": "icons/zapier.png",
      "ontological": "Automation-centric",
      "architectural": "Code flows",
      "teleological": "Business process automation",
      "structural": "Rule-based automation",
      "other": ["Event-driven", "Cloud-native", "Trigger-action flows"]
    },
    {
      "name": "AWS Step Functions",
      "url": "https://aws.amazon.com/step-functions/",
      "icon": "icons/aws-step-functions.png",
      "ontological": "Event-centric",
      "architectural": "State-machine based",
      "teleological": "Serverless orchestration",
      "structural": "JSON state machines",
      "other": ["Cloud-native", "Managed service", "Event-driven", "Serverless-centric"]
    },
    {
      "name": "Azure Logic Apps",
      "url": "https://azure.microsoft.com/en-us/services/logic-apps/",
      "icon": "icons/azure-logic-apps.png",
      "ontological": "Process-centric",
      "architectural": "Code flows",
      "teleological": "Integration",
      "structural": "Visual workflow design",
      "other": ["Cloud-native", "Managed service", "Event-driven"]
    },
    {
      "name": "Google Cloud Workflows",
      "url": "https://cloud.google.com/workflows",
      "icon": "icons/google-cloud-workflows.png",
      "ontological": "Event-centric",
      "architectural": "Code flows",
      "teleological": "Serverless orchestration",
      "structural": "YAML specifications",
      "other": ["Cloud-native", "Managed service", "Event-driven", "Serverless-centric"]
    },
    {
      "name": "Kubeflow Pipelines",
      "url": "https://www.kubeflow.org/docs/components/pipelines/",
      "icon": "icons/kubeflow.png",
      "ontological": "Data-centric",
      "architectural": "DAG-based",
      "teleological": "ML model orchestration",
      "structural": "Code-as-workflow",
      "other": ["Kubernetes-native", "Experiment tracking", "ML-centric"]
    }
  ];

  const facetConfig = [
    {field: 'ontological', display: 'Ontological', description: 'What kind of thing is the engine managing?'},
    {field: 'architectural', display: 'Architectural', description: 'What are the core architectural elements of the engine?'},
    {field: 'teleological', display: 'Teleological', description: 'What is the primary purpose and the goals of the workflow engine?'},
    {field: 'structural', display: 'Structural', description: "What's the structure / format of the workflow?"},
    {field: 'other', display: 'Other', description: 'What other traits does the engine have?'}
  ];

  let activeFilters = {};

  function buildFacets() {
    const facetsHtml = facetConfig.map(facet => {
      const values = [];
      workflowData.forEach(item => {
        const fieldValue = item[facet.field];
        if (Array.isArray(fieldValue)) {
          fieldValue.forEach(val => {
            if (!values.find(v => v.value === val)) {
              values.push({value: val, count: 1});
            } else {
              values.find(v => v.value === val).count++;
            }
          });
        } else {
          if (!values.find(v => v.value === fieldValue)) {
            values.push({value: fieldValue, count: 1});
          } else {
            values.find(v => v.value === fieldValue).count++;
          }
        }
      });

      const facetItems = values.map(val => `
        <div class="facet-item">
          <label>
            <input type="checkbox" value="${val.value}" data-field="${facet.field}" onchange="updateFilters()">
            ${val.value} <span class="count">(${val.count})</span>
          </label>
        </div>
      `).join('');

      return `
        <div class="facet-group">
          <h3 class="tooltip" onclick="toggleFacet('${facet.field}')">
            <span>${facet.display}
              <span class="tooltiptext">${facet.description}</span>
            </span>
            <span class="collapse-icon" id="icon-${facet.field}">▼</span>
          </h3>
          <div class="facet-items" id="items-${facet.field}">
            ${facetItems}
          </div>
        </div>
      `;
    }).join('');

    $('#facets').html(facetsHtml);
  }

  function updateFilters() {
    activeFilters = {};
    $('input[type="checkbox"]:checked').each(function() {
      const field = $(this).data('field');
      const value = $(this).val();
      if (!activeFilters[field]) activeFilters[field] = [];
      activeFilters[field].push(value);
    });
    displayResults();
  }

  function displayResults() {
    let filteredData = workflowData.filter(item => {
      return Object.keys(activeFilters).every(field => {
        const fieldValue = item[field];
        const filterValues = activeFilters[field];
        
        if (Array.isArray(fieldValue)) {
          return filterValues.some(filterVal => fieldValue.includes(filterVal));
        } else {
          return filterValues.includes(fieldValue);
        }
      });
    });

    const resultsHtml = filteredData.map(item => `
      <div class="result-item">
        <h4>
          <img src="${item.icon}" alt="${item.name} icon" class="engine-icon">
          <a href="${item.url}" target="_blank" rel="noopener noreferrer">${item.name}</a>
        </h4>
        <div class="field"><strong>Ontological:</strong> ${item.ontological}</div>
        <div class="field"><strong>Architectural:</strong> ${item.epistemological}</div>
        <div class="field"><strong>Teleological:</strong> ${item.teleological}</div>
        <div class="field"><strong>Structural:</strong> ${item.formalism}</div>
        <div class="field"><strong>Other:</strong> ${Array.isArray(item.underlying) ? item.underlying.join(', ') : item.underlying}</div>
      </div>
    `).join('');

    $('#results').html(resultsHtml);
  }

  function toggleFacet(fieldName) {
    const items = document.getElementById(`items-${fieldName}`);
    const icon = document.getElementById(`icon-${fieldName}`);
    
    if (items.classList.contains('collapsed')) {
      items.classList.remove('collapsed');
      icon.classList.remove('collapsed');
      items.style.maxHeight = items.scrollHeight + 'px';
    } else {
      items.classList.add('collapsed');
      icon.classList.add('collapsed');
      items.style.maxHeight = '0px';
    }
  }

  // Initialize
  $(document).ready(function() {
    buildFacets();
    displayResults();
    
    // Set initial max-height for smooth transitions
    setTimeout(() => {
      $('.facet-items').each(function() {
        if (!$(this).hasClass('collapsed')) {
          $(this).css('max-height', this.scrollHeight + 'px');
        }
      });
    }, 100);
  });
</script>

</body>
</html>
